!function(){"use strict";var t,e,n,a,r={492:function(t,e,n){n.a(t,(async function(t,e){try{var a=n(128),r=n(507),c=n(367),s=n(186),i=n(789),o=t([a,c,s,i]);[a,c,s,i]=o.then?(await o)():o;const{currentPage:d}=c.S;(async()=>{const t=document.createElement("div");t.className="main-layout";const e=new r.z("garage","big-button").render(),n=new r.z("winners","big-button").render();e.addEventListener("click",(()=>{document.getElementById("winners-layout").style.display="none",document.getElementById("garage-layout").style.display="block",e.disabled=!0,n.disabled=!1,c.S.currentPage="garage"})),n.addEventListener("click",(async function(){if(document.getElementById("garage-layout").style.display="none",document.getElementById("winners-layout").style.display="block",e.disabled=!1,c.S.currentPage="winners",!this.disabled){const t=document.getElementById("winners-next"),e=document.getElementById("winners-prev");(0,i.KH)(t,e),await(0,i.R4)(),await(0,i.gN)()}n.disabled=!0}));const o=document.createElement("nav");o.className="main-layout-navigation",o.append(e,n),t.append(o),t.append((new a.B).render()),t.append(await(new s.O).render()),"garage"===d?(e.disabled=!0,n.disabled=!1):(e.disabled=!1,n.disabled=!0),document.body.append(t)})(),e()}catch(t){e(t)}}))},507:function(t,e,n){n.d(e,{z:function(){return a}});class a{constructor(t,e,n){this.color=n,this.text=t,this.className=e}render(){const t=document.createElement("button");return t.type="button",t.className=`btn ${this.className} ${this.color?` ${this.color}`:""}`,t.textContent=this.text,t}}},47:function(t,e,n){n.d(e,{l:function(){return a}});class a{constructor(t,e){this.color=t,this.id=e}render(){const t=document.createElement("div");return t.id=`image-car-${this.id}`,t.className="car",t.innerHTML=`\n        <?xml version="1.0" encoding="iso-8859-1"?>\n        <svg fill="${this.color}" height="60px" width="60px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 511 511" xml:space="preserve">\n        <g>\n            <path d="M119.5,384c-4.142,0-7.5,3.358-7.5,7.5c0,9.098-7.402,16.5-16.5,16.5S79,400.598,79,391.5S86.402,375,95.5,375c4.142,0,7.5-3.358,7.5-7.5s-3.358-7.5-7.5-7.5C78.131,360,64,374.131,64,391.5S78.131,423,95.5,423s31.5-14.131,31.5-31.5C127,387.358,123.642,384,119.5,384z"/>\n            <path d="M439.5,384c-4.142,0-7.5,3.358-7.5,7.5c0,9.098-7.402,16.5-16.5,16.5s-16.5-7.402-16.5-16.5s7.402-16.5,16.5-16.5c4.142,0,7.5-3.358,7.5-7.5s-3.358-7.5-7.5-7.5c-17.369,0-31.5,14.131-31.5,31.5s14.131,31.5,31.5,31.5s31.5-14.131,31.5-31.5C447,387.358,443.642,384,439.5,384z"/>\n            <path d="M447.5,256h-16c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h16c4.142,0,7.5-3.358,7.5-7.5S451.642,256,447.5,256z"/>\n            <path d="M327.5,320h-144c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h144c4.142,0,7.5-3.358,7.5-7.5S331.642,320,327.5,320z"/>\n            <path d="M471.513,224H371.038l-68.199-82.764c-0.077-0.094-0.157-0.186-0.239-0.275c-6.198-6.817-14.583-11.219-23.6-12.537V95.5c0-17.369-14.131-31.5-31.5-31.5H215v-0.5c0-4.142-3.358-7.5-7.5-7.5s-7.5,3.358-7.5,7.5V64h-41v-0.5c0-4.142-3.358-7.5-7.5-7.5s-7.5,3.358-7.5,7.5V64h-32.5C94.131,64,80,78.131,80,95.5v32.537c-13.185,0.383-25.202,7.168-32.316,18.347c-0.068,0.107-0.134,0.217-0.197,0.328L6.061,219.793C2.095,226.095,0,233.356,0,240.805V327.5c0,15.285,9.017,29.334,22.972,35.791c2.002,0.927,4.312,0.925,6.311-0.006c1.829-0.85,3.221-2.4,3.894-4.285h7.798C35.282,368.514,32,379.629,32,391.5c0,35.014,28.486,63.5,63.5,63.5s63.5-28.486,63.5-63.5c0-11.871-3.282-22.986-8.975-32.5h7.775c0.19,0.718,0.375,1.437,0.54,2.162c0.776,3.415,3.812,5.838,7.313,5.838h179.691c3.502,0,6.538-2.423,7.313-5.838c0.165-0.725,0.35-1.444,0.54-2.162h7.775c-5.693,9.514-8.975,20.629-8.975,32.5c0,35.014,28.486,63.5,63.5,63.5s63.5-28.486,63.5-63.5c0-11.871-3.282-22.986-8.975-32.5h7.775c0.19,0.718,0.375,1.437,0.54,2.162c0.776,3.415,3.812,5.838,7.313,5.838h1.823C500.448,367,511,356.447,511,343.477v-79.99C511,241.714,493.286,224,471.513,224z M496,288h-8.5c-4.687,0-8.5-3.813-8.5-8.5s3.813-8.5,8.5-8.5h8.5V288z M304.563,166.916L351.602,224H116.042l24.522-45.65C145.1,171.238,152.822,167,161.27,167H303.5C303.862,167,304.215,166.966,304.563,166.916z M247.5,79c9.098,0,16.5,7.402,16.5,16.5V128h-49V79H247.5z M200,79v49h-41V79H200z M111.5,79H144v49H95V95.5C95,86.402,102.402,79,111.5,79z M53.401,166.696c0.667,0.194,1.37,0.304,2.099,0.304h35.457l-24.535,45.671C61.896,219.769,54.187,224,45.754,224H20.918L53.401,166.696z M95.5,440C68.757,440,47,418.243,47,391.5S68.757,343,95.5,343s48.5,21.757,48.5,48.5S122.243,440,95.5,440z M137.579,344c-11.213-9.944-25.948-16-42.079-16s-30.866,6.056-42.079,16H39.29c11.21-19.986,32.578-33,56.21-33c14.913,0,28.908,4.948,40.474,14.31c6.412,5.19,11.746,11.568,15.741,18.69H137.579z M415.5,440c-26.743,0-48.5-21.757-48.5-48.5s21.757-48.5,48.5-48.5s48.5,21.757,48.5,48.5S442.243,440,415.5,440z M457.579,344c-11.213-9.944-25.948-16-42.079-16s-30.866,6.056-42.079,16h-14.136c3.995-7.123,9.329-13.5,15.741-18.69C386.592,315.948,400.587,311,415.5,311s28.908,4.948,40.474,14.31c6.412,5.19,11.746,11.568,15.741,18.69H457.579z M491.139,351.172c-4.717-14.635-13.689-27.777-25.728-37.521C451.35,302.269,433.624,296,415.5,296s-35.85,6.269-49.911,17.651c-12.266,9.928-21.347,23.382-25.99,38.349H171.401c-4.643-14.967-13.724-28.421-25.99-38.349C131.35,302.269,113.624,296,95.5,296c-32.221,0-61.034,19.614-73.261,48.782C17.694,340.261,15,334.063,15,327.5V271h384.5c4.142,0,7.5-3.358,7.5-7.5s-3.358-7.5-7.5-7.5H15v-15.195c0-0.611,0.026-1.22,0.071-1.826C15.214,238.986,15.355,239,15.5,239h30.254c13.715,0,26.243-6.943,33.512-18.574c0.087-0.139,0.169-0.281,0.247-0.425l30.595-56.951c1.249-2.324,1.184-5.134-0.17-7.398S106.139,152,103.5,152H62.113c4.661-5.68,11.587-9,19.062-9h192.127c6.858,0,13.44,2.887,18.086,7.926l0.885,1.074H161.27c-13.729,0-26.271,6.951-33.547,18.594c-0.087,0.139-0.169,0.281-0.247,0.426l-30.582,56.931c-1.249,2.325-1.184,5.134,0.17,7.398S100.861,239,103.5,239h264h104.013c10.891,0,20.141,7.149,23.312,17H487.5c-12.958,0-23.5,10.542-23.5,23.5s10.542,23.5,23.5,23.5h8.5v40.477C496,346.866,494.011,349.8,491.139,351.172z"/>\n        </g>\n        </svg>\n    `,t}}},850:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{H:function(){return s}});var r=n(297),c=t([r]);r=(c.then?(await c)():c)[0];class s{constructor(t,e){this.carsData=t,this.formElement=e}render(){const t=document.createElement("ul");return t.className="cars-list",t.id="garage-cars-list",this.carsData.forEach((e=>{const n=document.createElement("li");n.id=`car-track-${e.id}`,n.className="cars-list-item",n.append(new r.f(e,this.formElement).render()),t.append(n)})),t}}a()}catch(t){a(t)}}))},790:function(t,e,n){n.d(e,{W:function(){return a}});class a{constructor(t){this.id=t}render(){const t=document.createElement("div");return t.id=`flag-${this.id}`,t.className="flag",t.innerHTML='<?xml version="1.0" encoding="iso-8859-1"?>\n        <svg fill="#92e41d" height="50px" width="50px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n             viewBox="0 0 512 512" xml:space="preserve">\n        <g>\n            <g>\n                <path d="M509.463,338.509l-57.356-129.052l57.856-130.177c3.201-7.199,2.54-15.527-1.752-22.133\n                    c-4.293-6.606-11.636-10.59-19.514-10.59H279.256V23.287c0-12.852-10.419-23.271-23.271-23.271H23.271\n                    C10.419,0.015,0,10.435,0,23.287v15.514v263.742v186.171c0,12.852,10.419,23.271,23.271,23.271\n                    c12.852,0,23.271-10.419,23.271-23.271V325.814h186.171v23.271c0,12.852,10.419,23.271,23.271,23.271h232.713\n                    c0.009,0,0.02,0,0.031,0c12.852,0,23.271-10.419,23.271-23.271C512,345.277,511.085,341.682,509.463,338.509z M232.713,69.829\n                    v209.442H46.543V46.558h186.171V69.829z M279.256,325.814v-23.271V93.101h173.632l-47.512,106.905\n                    c-2.675,6.016-2.675,12.886,0,18.903l47.512,106.905H279.256z"/>\n            </g>\n        </g>\n        </svg>',t}}},748:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{k:function(){return d}});var r=n(507),c=n(583),s=n(367),i=n(789),o=t([c,s,i]);[c,s,i]=o.then?(await o)():o;class d{constructor(t){this.text=t}render(){const t=document.createElement("form");t.id=`${this.text}-form`,t.className="garage-menu-form";const e=document.createElement("input");e.id=`${this.text}-name-input`,e.type="text",e.name="nameInput",e.className=`form-text-input form-text-input-${this.text}`;const n=document.createElement("input");n.id=`${this.text}-color-input`,n.type="color",n.name="colorInput",n.className=`form-color-input form-color-input-${this.text}`;const a=new r.z(this.text,"big-button").render();switch(a.id=`${this.text}-submit-button`,a.name="submitButton",t.append(e,n,a),this.text){case"update":n.disabled=!0,e.disabled=!0,a.disabled=!0,a.addEventListener("click",(async function(){if(!this.disabled&&e.value&&n.value){this.disabled=!0;const t={name:e.value,color:n.value};e.value="",await(0,c.Bo)(t),await(0,i.lW)(),(0,i.SA)(),n.disabled=!0,e.disabled=!0,s.S.selectedCar=null}}));break;case"create":a.addEventListener("click",(async function(){if(!this.disabled&&e.value&&n.value){this.disabled=!0;const t={name:e.value,color:n.value};e.value="",await(0,c.DT)(t),await(0,i.lW)(),(0,i.SA)();const[a,r]=[document.getElementById("next"),document.getElementById("prev")];(0,i.KH)(a,r),this.disabled=!1}}))}return t}}a()}catch(t){a(t)}}))},129:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{t:function(){return d}});var r=n(507),c=n(748),s=n(789),i=n(108),o=t([c,s,i]);[c,s,i]=o.then?(await o)():o;class d{constructor(){}render(){const t=document.createElement("div");t.className="garage-menu";const e=new r.z("race","big-button").render();e.id="start-race-button",e.addEventListener("click",(async()=>{e.disabled||(e.disabled=!0,n.disabled=!1,(0,i.K5)())}));const n=new r.z("reset","big-button").render();n.disabled=!0,n.id="reset-race-button",n.addEventListener("click",(async()=>{n.disabled||(n.disabled=!0,await(0,i.xv)(),e.disabled=!1)}));const a=new r.z("generate cars","big-button").render();a.addEventListener("click",(async function(){if(!this.disabled){this.disabled=!0,await(0,s.TF)(),await(0,s.lW)(),(0,s.SA)();const[t,e]=[document.getElementById("garage-next"),document.getElementById("garage-prev")];(0,s.KH)(t,e),this.disabled=!1}}));const o=new c.k("update").render();return t.append(new c.k("create").render(),o,e,n,a),{menu:t,updateForm:o}}}a()}catch(t){a(t)}}))},128:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{B:function(){return l}});var r=n(850),c=n(129),s=n(507),i=n(367),o=n(789),d=t([r,c,i,o]);[r,c,i,o]=d.then?(await d)():d;class l{constructor(){}render(){const t=document.createElement("div");t.id="garage-layout";const e=document.createElement("h1");e.className="title",e.id="garage-title",e.textContent=`Garage (${i.S.carsTotal})`;const n=document.createElement("div");n.className="pagination-box";const a=document.createElement("p");a.className="pagination-subtitle",a.textContent=`page #${i.S.garagePage}`;const d=new s.z("next","big-button").render(),l=new s.z("prev","big-button").render();(0,o.KH)(d,l),d.id="garage-next",l.id="garage-prev",d.addEventListener("click",(async function(){if(!this.disabled){const t=document.getElementById("start-race-button"),e=document.getElementById("reset-race-button");t.disabled=!0,e.disabled=!0,i.S.garagePage+=1,(0,o.KH)(d,l),await(0,o.lW)(),(0,o.SA)(),a.textContent=`page #${i.S.garagePage}`,t.disabled=!1}})),l.addEventListener("click",(async function(){this.disabled||(i.S.garagePage-=1,(0,o.KH)(d,l),await(0,o.lW)(),(0,o.SA)(),a.textContent=`page #${i.S.garagePage}`)})),n.append(a,l,d);const{menu:u,updateForm:m}=(new c.t).render();return t.append(u,e,n,new r.H(i.S.carsData,m).render()),t}}a()}catch(t){a(t)}}))},82:function(t,e,n){n.d(e,{Y:function(){return a}});class a{constructor(t,e){this.name=t,this.time=e}render(){const t=document.createElement("div");return t.className="modal",t.innerHTML=`Winner: ${this.name}<br>Time: ${this.time&&this.time/100}s`,t}}},297:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{f:function(){return m}});var r=n(47),c=n(507),s=n(790),i=n(367),o=n(583),d=n(789),l=n(108),u=t([i,o,d,l]);[i,o,d,l]=u.then?(await u)():u;class m{constructor({name:t,color:e,id:n},a){this.name=t,this.color=e,this.id=n,this.formElement=a}render(){const t=document.createElement("div"),e=new r.l(this.color,this.id).render(),n=new s.W(this.id).render(),a=new c.z("select","big-button").render();a.id=`select-button-${this.id}`,a.addEventListener("click",(()=>{const[t,e]=Array.from(this.formElement.getElementsByTagName("input")).filter((t=>"update-name-input"===t.id||"update-color-input")),n=Array.from(this.formElement.getElementsByTagName("button"))[0];t.disabled=!1,t.value=this.name,e.disabled=!1,e.value=this.color,n.disabled=!1,i.S.selectedCar=this.id}));const u=new c.z("remove","big-button").render();u.id=`remove-button-${this.id}`,u.addEventListener("click",(async()=>{await(0,o.kG)(this.id),await(0,o.ap)(this.id),await(0,d.lW)(),(0,d.SA)()}));const m=new c.z("start","small-button _active").render();m.id=`start-button-${this.id}`,m.addEventListener("click",(async()=>{m.disabled||(i.S.controller=new AbortController,(0,l.Sz)(this.id,i.S.controller))}));const g=new c.z("restart","small-button ").render();g.id=`stop-button-${this.id}`,g.disabled=!0,g.addEventListener("click",(async()=>{g.disabled||(0,l.sL)(this.id,i.S.controller)}));const w=document.createElement("span");w.textContent=this.name,w.className="car-name";const h=document.createElement("div");h.className="track-general-buttons",h.append(a,u,w);const p=document.createElement("div");p.className="track-road-buttons",p.append(m,g);const f=document.createElement("div");f.className="road",f.append(n);const y=document.createElement("div");return y.className="track-road",y.append(p,e),t.append(h,y,f),t}}a()}catch(t){a(t)}}))},663:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{J:function(){return o}});var r=n(583),c=n(367),s=n(47),i=t([r,c]);[r,c]=i.then?(await i)():i;class o{constructor(t){this.winnersData=t}async render(){const t=document.createElement("ul");return this.winnersData.forEach((async(e,n)=>{const a=document.createElement("li");a.id=`winner-${e.id}`,a.className="winners-list-item";const{name:i,color:o}=await(0,r.oX)(e.id),d=document.createElement("span");d.className="winner-number",d.textContent=`${r.lS*(c.S.winnersPage-1)+n+1}`;const l=new s.l(o,e.id).render(),u=document.createElement("span");u.className="winner-name",u.textContent=i;const m=document.createElement("span");m.className="winner-wins",m.textContent=e.wins.toString();const g=document.createElement("span");g.className="winner-time",g.textContent=e.time.toString(),a.append(d,l,u,m,g),t.append(a)})),t}}a()}catch(t){a(t)}}))},74:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{y:function(){return o}});var r=n(367),c=n(789),s=n(663),i=t([r,c,s]);[r,c,s]=i.then?(await i)():i;class o{constructor(){}async render(){const t=document.createElement("div");t.className="winners-menu";const e=document.createElement("span");e.textContent="№",e.className="menu-number";const n=document.createElement("span");n.textContent="car",n.className="menu-car";const a=document.createElement("span");a.textContent="name",a.className="menu-name";const i=document.createElement("span");i.textContent="wins"+("wins"===r.S.sortBy?"ASC"===r.S.sortOrder?"↑":"↓":""),i.className="menu-wins",i.addEventListener("click",(async()=>{const t=document.getElementById("winners-next"),e=document.getElementById("winners-prev");(0,c.KH)(t,e),r.S.sortBy="wins",r.S.sortOrder=r.S.sortOrder&&"DESC"===r.S.sortOrder?"ASC":"DESC",await(0,c.R4)(),await(0,c.gN)()}));const o=document.createElement("span");o.textContent="time"+("time"===r.S.sortBy?"ASC"===r.S.sortOrder?"↑":"↓":""),o.className="menu-time",o.addEventListener("click",(async()=>{const t=document.getElementById("winners-next"),e=document.getElementById("winners-prev");(0,c.KH)(t,e),r.S.sortBy="time",r.S.sortOrder=r.S.sortOrder&&"DESC"===r.S.sortOrder?"ASC":"DESC",await(0,c.R4)(),await(0,c.gN)()})),t.append(e,n,a,i,o);const d=await new s.J(r.S.winnersData).render(),l=document.createElement("div");return l.id="winners-table",l.append(t,d),l}}a()}catch(t){a(t)}}))},186:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{O:function(){return d}});var r=n(367),c=n(789),s=n(507),i=n(74),o=t([r,c,i]);[r,c,i]=o.then?(await o)():o;class d{constructor(){}async render(){const t=document.createElement("div");t.id="winners-layout",t.style.display="none";const e=document.createElement("h1");e.className="title",e.id="winners-title",e.textContent=`Winners (${r.S.winnersTotal})`;const n=document.createElement("div");n.className="pagination-box";const a=document.createElement("p");a.className="pagination-subtitle",a.textContent=`page #${r.S.winnersPage}`;const o=new s.z("next","big-button").render(),d=new s.z("prev","big-button").render();(0,c.KH)(o,d),console.log(r.S.winnersTotal),o.id="winners-next",d.id="winners-prev",o.addEventListener("click",(async function(){this.disabled||(r.S.winnersPage+=1,(0,c.KH)(o,d),await(0,c.R4)(),await(0,c.gN)(),a.textContent=`page #${r.S.winnersPage}`)})),d.addEventListener("click",(async function(){this.disabled||(r.S.winnersPage-=1,(0,c.KH)(o,d),await(0,c.R4)(),await(0,c.gN)(),a.textContent=`page #${r.S.winnersPage}`)})),n.append(a,d,o);const l=await(new i.y).render();return t.append(e,n,l),t}}a()}catch(t){a(t)}}))},108:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{K5:function(){return g},Sz:function(){return u},sL:function(){return m},xv:function(){return w}});var r=n(583),c=n(82),s=n(367),i=t([r,s]);[r,s]=i.then?(await i)():i;const o=t=>{const{top:e,left:n,width:a,height:r}=t.getBoundingClientRect();return{xPos:n+a/2,yPos:e+r/2}},d=(t,e)=>{const n=o(t);return o(e).xPos-n.xPos},l=(t,e,n)=>{let a=null;const r={};return r.id=window.requestAnimationFrame((function c(s){a||(a=s);const i=s-a,o=Math.round(i*(e/n));t.style.transform=`translateX(${Math.min(o,e)}px)`,o<e&&(r.id=window.requestAnimationFrame(c))})),r},u=async(t,e)=>{let n=0;const a=setInterval((function(){++n}),10),[c]=Array.from(document.getElementsByTagName("button")).filter((e=>e.id===`start-button-${t}`)),[i]=Array.from(document.getElementsByTagName("button")).filter((e=>e.id===`stop-button-${t}`)),o=document.getElementById(`image-car-${t}`),u=document.getElementById(`flag-${t}`);c.disabled=!0,i.disabled=!1,c.classList.toggle("_active"),c.classList.toggle("_fetch"),i.classList.toggle("_active");try{const{velocity:i,distance:m}=await(0,r.p6)(t,e.signal),g=Math.round(m/i);c.classList.toggle("_fetch");const w=Math.floor(d(o,u));s.S.animation[t]=l(o,w,g);const{success:h}=await(0,r.Ag)(t,e.signal);return clearInterval(a),h||window.cancelAnimationFrame(s.S.animation[t].id),n}catch(e){clearInterval(a),e instanceof Error&&("AbortError"===e.name?console.log("Car was stopped"):"SyntaxError"===e.name&&(console.log("Engine broke down"),window.cancelAnimationFrame(s.S.animation[t].id)))}},m=async(t,e)=>{e.abort();const[n]=Array.from(document.getElementsByTagName("button")).filter((e=>e.id===`start-button-${t}`)),[a]=Array.from(document.getElementsByTagName("button")).filter((e=>e.id===`stop-button-${t}`)),c=document.getElementById(`image-car-${t}`);a.disabled=!0,window.cancelAnimationFrame(s.S.animation[t].id),await(0,r.yQ)(t),n.disabled=!1,n.classList.toggle("_active"),n.classList.remove("_fetch"),a.classList.toggle("_active"),c.removeAttribute("style")},g=async()=>{s.S.hasWinner=!1,s.S.controller=new AbortController,s.S.animation={};const t=document.getElementById("garage-prev"),e=document.getElementById("garage-next");t.disabled=!0,e.disabled=!0,await Promise.all(s.S.carsData.map((async t=>{const e=await u(t.id,s.S.controller);if(!s.S.hasWinner&&e){s.S.hasWinner=!0;const n=new c.Y(t.name,e).render();document.body.append(n);const a=setTimeout((()=>{n.remove(),clearTimeout(a)}),5e3);await(0,r.H9)(t.id,e/100)}}))),s.S.garagePage>1&&(t.disabled=!1),s.S.garagePage*r.T0<s.S.carsTotal&&(e.disabled=!1)},w=async()=>{await Promise.all(s.S.carsData.map((async t=>await m(t.id,s.S.controller))))};a()}catch(t){a(t)}}))},583:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{Ag:function(){return y},Bo:function(){return g},DT:function(){return m},H9:function(){return S},T0:function(){return i},X7:function(){return l},ap:function(){return h},kG:function(){return w},lS:function(){return o},oX:function(){return u},p6:function(){return p},wG:function(){return d},yQ:function(){return f}});var r=n(367),c=t([r]);r=(c.then?(await c)():c)[0];const s="http://127.0.0.1:3000",i=7,o=10,d=async(t,e=i)=>{const n=await fetch(`${s}/garage?_page=${t}&_limit=${e}`);return{data:await n.json(),carsTotal:Number(n.headers.get("X-Total-Count"))}},l=async({page:t,sort:e,order:n,limit:a=o})=>{const r=await fetch(`${s}/winners?_page=${t}&_limit=${a}${e&&n?`&_sort=${e}&_order=${n}`:""}`);return r.ok?{data:await r.json(),winnersTotal:Number(r.headers.get("X-Total-Count"))}:{data:[],winnersTotal:0}},u=async t=>{const e=await fetch(`${s}/garage/${t}`);return await e.json()},m=async t=>{const e=await fetch(`${s}/garage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await e.json()},g=async t=>{const e=await fetch(`${s}/garage/${r.S.selectedCar}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await e.json()},w=async t=>(await fetch(`${s}/garage/${t}`,{method:"DELETE"})).ok,h=async t=>(await fetch(`${s}/winners/${t}`,{method:"DELETE"})).ok,p=async(t,e)=>{const n=await fetch(`${s}/engine?id=${t}&status=started`,{method:"PATCH",signal:e});return await n.json()},f=async t=>{const e=await fetch(`${s}/engine?id=${t}&status=stopped`,{method:"PATCH"});return await e.json()},y=async(t,e)=>{const n=await fetch(`${s}/engine?id=${t}&status=drive`,{method:"PATCH",signal:e});return await n.json()},b=async(t,e)=>(await fetch(`${s}/winners/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign({id:t},e))})).ok,v=async t=>(await fetch(`${s}/winners`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok,S=async(t,e)=>{try{const n=await fetch(`${s}/winners/${t}`);if(404===n.status)throw new Error("404");const{wins:a,time:r}=await n.json();b(t,{wins:a+1,time:e<r?e:r})}catch(n){v({id:t,wins:1,time:e})}};a()}catch(t){a(t)}}))},367:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{S:function(){return l}});var r=n(583),c=t([r]);r=(c.then?(await c)():c)[0];const{data:s,carsTotal:i}=await(0,r.wG)(1),{data:o,winnersTotal:d}=await(0,r.X7)({page:1,sort:"id",order:"DESC"}),l={currentPage:"garage",garagePage:1,winnersPage:1,winnersData:o,winnersTotal:d,carsData:s,carsTotal:i,sortBy:null,sortOrder:null,selectedCar:null,animation:{},controller:new AbortController,hasWinner:!1};a()}catch(t){a(t)}}),1)},789:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{KH:function(){return u},R4:function(){return f},SA:function(){return l},TF:function(){return h},gN:function(){return p},lW:function(){return d}});var r=n(583),c=n(367),s=n(850),i=n(74),o=t([r,c,s,i]);[r,c,s,i]=o.then?(await o)():o;const d=async()=>{const{data:t,carsTotal:e}=await(0,r.wG)(c.S.garagePage);c.S.carsData=t,c.S.carsTotal=e,document.getElementById("garage-title").textContent=`Garage (${e})`},l=()=>{var t,e;const n=document.getElementById("update-form");null===(t=document.getElementById("garage-cars-list"))||void 0===t||t.remove(),null===(e=document.getElementById("garage-layout"))||void 0===e||e.append(new s.H(c.S.carsData,n).render())},u=(t,e)=>{switch(c.S.currentPage){case"garage":c.S.garagePage*r.T0<c.S.carsTotal?t.disabled=!1:t.disabled=!0,c.S.garagePage>1?e.disabled=!1:e.disabled=!0;break;case"winners":c.S.winnersPage*r.lS<c.S.winnersTotal?t.disabled=!1:t.disabled=!0,c.S.winnersPage>1?e.disabled=!1:e.disabled=!0}},m=["Mercedes","BMW","Lada","Audi","Porsche","Volkswagen","Lamborghini","LandRover","Suzuki","Subaru","Toyota"],g=["A10","GTR","Cruise","Q8","B137","Pass","Euro","V82010","RSS","EPAM"],w=()=>{let t="#";for(let e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},h=async()=>{const t=[];for(let e=0;e<100;e++){const e={name:`${m[Math.floor(Math.random()*m.length)]} ${g[Math.floor(Math.random()*g.length)]}`,color:w()};t.push(e)}await Promise.all(t.map((async t=>await(0,r.DT)(t))))},p=async()=>{var t,e;null===(t=document.getElementById("winners-table"))||void 0===t||t.remove(),null===(e=document.getElementById("winners-layout"))||void 0===e||e.append(await(new i.y).render())},f=async()=>{const{data:t,winnersTotal:e}=await(0,r.X7)({page:c.S.winnersPage,sort:c.S.sortBy,order:c.S.sortOrder});c.S.winnersData=t,c.S.winnersTotal=e,document.getElementById("winners-title").textContent=`Winners (${e})`};a()}catch(t){a(t)}}))}},c={};function s(t){var e=c[t];if(void 0!==e)return e.exports;var n=c[t]={exports:{}};return r[t](n,n.exports,s),n.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=function(t){t&&!t.d&&(t.d=1,t.forEach((function(t){t.r--})),t.forEach((function(t){t.r--?t.r++:t()})))},s.a=function(r,c,s){var i;s&&((i=[]).d=1);var o,d,l,u=new Set,m=r.exports,g=new Promise((function(t,e){l=e,d=t}));g[e]=m,g[t]=function(t){i&&t(i),u.forEach(t),g.catch((function(){}))},r.exports=g,c((function(r){var c;o=function(r){return r.map((function(r){if(null!==r&&"object"==typeof r){if(r[t])return r;if(r.then){var c=[];c.d=0,r.then((function(t){s[e]=t,a(c)}),(function(t){s[n]=t,a(c)}));var s={};return s[t]=function(t){t(c)},s}}var i={};return i[t]=function(){},i[e]=r,i}))}(r);var s=function(){return o.map((function(t){if(t[n])throw t[n];return t[e]}))},d=new Promise((function(e){(c=function(){e(s)}).r=0;var n=function(t){t!==i&&!u.has(t)&&(u.add(t),t&&!t.d&&(c.r++,t.push(c)))};o.map((function(e){e[t](n)}))}));return c.r?d:s()}),(function(t){t?l(g[n]=t):d(m),a(i)})),i&&(i.d=0)},s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};s(492)}();